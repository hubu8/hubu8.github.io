# 凯同学的面经(2025-8)


## Boss直聘(2025-08-02)

### 1、写一道动态规划题目

[从魔法师身上吸取的最大能量](https://leetcode.cn/problems/taking-maximum-energy-from-the-mystic-dungeon/)

在神秘的地牢中，`n` 个魔法师站成一排。每个魔法师都拥有一个属性，这个属性可以给你提供能量。有些魔法师可能会给你负能量，即从你身上吸取能量。

你被施加了一种诅咒，当你从魔法师 `i` 处吸收能量后，你将被立即传送到魔法师 `(i + k)` 处。这一过程将重复进行，直到你到达一个不存在 `(i + k)` 的魔法师为止。

换句话说，你将选择一个起点，然后以 `k` 为间隔跳跃，直到到达魔法师序列的末端，**在过程中吸收所有的能量**。

给定一个数组 `energy` 和一个整数`k`，返回你能获得的 **最大** 能量。

#### 代码解析

说白了就是起点不知道但是终点范围固定，通过状态转移向前寻找最大值，起点就不用关心

```java
public int maximumEnergy(int[] energy, int k) {
    int length = energy.length;
    int[] dp = new int[length + k];
    int res = Integer.MIN_VALUE;
    for(int i = length-1; i >= 0; i--){
        dp[i] = energy[i] + dp[i + k];
        res = Math.max(res, dp[i]);
    }
    return res;
}
```

通过范围进行二次循环，时间复杂度O(n),因为k是常量
```java
class Solution {
    public int maximumEnergy(int[] energy, int k) {
        int length = energy.length;
        int[] dp = new int[length + k];
        int res = Integer.MIN_VALUE;
        for(int i = length-1; i >= 0; i--){
            dp[i] = energy[i] + dp[i + k];
            res = Math.max(res, dp[i]);
        }
        return res;
    }
}
```



### 2、线上sql优化经验、线上问题排查经验、主动优化问题经验

线上sql优化经验：

​	1、避免使用select *

​	2、小表驱动大表

​	3、优化分页查询

​	4、避免or连接条件

​	5、优先使用union all代替union

​	6、索引合理设计



线上问题排查经验：

​	总：稳定现场(止损优先)、科学排查、复盘改进

​	排查：指标->日志->调用链路->复盘改进

主动优化问题经验：

​	

### 3、spring源码看过没有

### 4、mybatis plus源码看过没有，与你们的框架有什么不同

### 5、rabbitmq怎么保证消息不丢失的，有没有横向对比过其他mq

### 6、规则引擎听说过没，有哪些规则引擎

- **Drools**: 规则与代码分离（DRL文件/决策表）、RETE算法优化、运行时动态加载规则【金融风控、保险理赔等需处理多层对象和自定义数据结构的复杂业务】
- **LiteFlow**：支持任意编排规则、平滑热刷新、多级嵌套与外部存储扩展【兼容任意Java架构，学习成本低，分钟级上手】

### 7、用的哪种jvm，有没有对比过

### 8、java17有哪些新特性，有没有对比过每个版本

### 9、线程池线程是怎么复用的

线程池将线程和任务进⾏解耦，线程是线程，任务是任务，摆脱了之前通过 Thread 创建线程时的⼀个线程必须对应⼀个任务的限制。

在线程池中，同⼀个线程可以从阻塞队列中不断获取新任务来执⾏，其核⼼原理在于线程池对 Thread 进⾏了封装，并不是每次执⾏任务都会调⽤ Thread.start() 来创建新线程，⽽是让每个线程去执⾏⼀个“循环任务”，在这个“循环任务”中不停检查是否有任务需要被执⾏，如果有则直接执⾏，也就是调⽤ 任务中的 run ⽅法，将 run ⽅法当成⼀个普通的⽅法执⾏，通过这种⽅式只使⽤固定的线程就将所有任务的 run ⽅法串联起来。

线程复用依赖‌**循环任务获取**‌（`while + getTask()`）和‌**阻塞队列调度**‌，通过解耦线程与任务、动态管理线程生命周期实现高效复用

线程池的核心目标之一是避免频繁创建和销毁线程，通过线程复用提升性能。其复用机制主要依赖以下关键设计：

1、线程执行与任务解耦（工作线程调用任务的`run()`方法（同步执行），而非通过`start()`创建新线程）

2、阻塞队列实现任务调度（‌生产者-消费者模型、工作线程通过`getTask()`方法循环从队列取任务）

3、线程复用与控制策略（线程包装与状态管理、线程复用性保障）

### 10、多线程的使用场景

**1、并发处理IO操作**：IO操作时cpu处于空闲状态，多线程可以让CPU在等待IO时处理其他任务，减少整体耗时。

**2、提升CPU利用率**：计算密集型，可以将任务分配到多个CPU核心，避免单线程阻塞导致的资源浪费

**3、异步任务处理**：避免用户操作因等待任务而卡顿

**4、并发服务设计**：多线程可并行响应多个客户端，提升服务吞吐量

**5、实时性要求较高的场景**：分离不同优先级任务，确保高优先级任务不被阻塞

**6、批量任务并行化**：并行执行，减少耗时

#### 线程池参数如何设置？

**核心线程数**：

- CPU密集型任务：CPU核心数 + 1   	 避免过多线程竞争CPU导致上下文切换开销【+1： 避免过度切换，应对短暂阻塞】
- IO密集型任务：CPU核心数 * 2    	  充分利用线程等待IO的空闲时间

**最大线程数：**

- 需要大于核心线程数， 一般是核心线程数 * 2
- 高并发场景需要压测，避免队列堆积或者资源耗尽

**任务队列**

- 有界队列 ArrayBlockQueue: 需设置合理容量，防止任务堆积导致内存溢出【队列满了之后生产者会被阻塞或者触发拒绝策略】
- 无界队列LinkBlockQueue: 使用与任务量波动平缓的场景，可能引发内存风险

**空闲线程存活时间**

- 非核心线程空闲超过此时间会被回收，通常设为 `30秒~1分钟`，平衡资源复用与释放效率

### 11、mysql为什么用innodb，有没有横向对比过？

1. ‌**事务支持（ACID特性）**‌
   InnoDB完全支持原子性、一致性、隔离性和持久性，适合金融、电商等需要严格数据一致性的场景。
2. ‌**行级锁定**‌
   仅锁定操作行，极大提升高并发下的读写性能（如1000个用户同时修改不同订单）。
3. ‌**崩溃恢复能力**‌
   通过事务日志（Redo Log）和Double Write Buffer机制，保障意外宕机后数据不丢失。
4. ‌**外键约束**‌
   自动维护关联表的数据完整性，避免脏数据。
5. ‌**聚簇索引**‌
   数据按主键物理排序存储，显著提升范围查询效率

####  **InnoDB vs MyISAM（旧版默认引擎）**‌

| ‌**特性**‌     | ‌**InnoDB**‌           | ‌**MyISAM**‌               |
| ------------ | -------------------- | ------------------------ |
| ‌**事务支持**‌ | ✔️ (ACID完备)         | ✖️                        |
| ‌**锁粒度**‌   | 行级锁（高并发友好） | 表级锁（写操作阻塞严重） |
| ‌**外键约束**‌ | ✔️                    | ✖️                        |
| ‌**崩溃恢复**‌ | 自动恢复（安全）     | 易损毁（需手动修复）     |
| ‌**全文索引**‌ | MySQL 5.6+支持       | ✔️（早期优势）            |
| ‌**适用场景**‌ | 写密集、高并发事务   | 只读或低频更新场景       |

‌**典型场景差异**‌：

- MyISAM的`COUNT(*)`直接返回缓存值（快），但崩溃后表易损坏；
- InnoDB需实时统计行数（慢），但数据安全性强

### 12、有哪些锁，重量级锁、轻量级锁等等



### 13、项目管理的见解

### 14、有没有学习英语的习惯

### 15、工作中提升自己的习惯，文档编写

### 16、贪心算法与动态规划的区别



## BOSS二面(2025-08-08)

### 1、redis是如何保证原子性的，setnx做了什么， 为什么不用get + set

### 2、事务回滚，缓存如何处理的，同一个事务呢？分布式事务呢？

### 3、jvm调优做过吗？垃圾回收器用的什么

### 4、java用的什么版本，17用过吗

### 5、项目优化讲一下

### 6、联合索引讲一下，什么场景会用联合索引，是只要组合字段就要加吗？联合索引的结构与单字段索引有什么不同？联合索引比单条索引快在哪

### 7、集群有哪些，集群节点处理，并发量有多少



## 顺丰(2025-08-05)

### 1、介绍一下项目，具体业务流程，项目都是深度参与吗？

###  2、多语言问题处理、多币别处理、金额数据处理

### 3、线上sql慢，如何排查，执行计划有哪些需要注意的字段

###  4、mysql与pgsql的执行计划一样吗？有什么区别

###  5、数据量大之后，分库分表如何实现，如何分（冷热、字段分片），分片后一个表数据量多大会比较合适。分库分表有哪些中间件

###  6、线程有哪些启动方式，代码写了就是就是一个线程吗？线程池是如何使用的

###  7、一段很简单计算的代码，偶发执行很慢，可能有什么原因

### 8、mysql sql没走索引，可能有哪些原因？如何排查？大数据in为什么mysql会优化成全表扫描？

### 9、项目中树形结构长编码优化查询后，顶级节点长编码、长名称修改引起全表修改，怎么处理

### 10、分布式数据库（支持跨库事务）了解吗

### 11、nio了解吗？怎么实现的？os操作系统有没有对轮询（死循环）优化

### 12、netty框架了解吗？用过吗？

### 13、redis有哪些数据结构，一般怎么用的，性能为什么好，持久化策略，能保证数据不丢失吗？
### 14、大数据框架have等有了解吗？
### 15、平常自己有学习哪些技术相关的

### 16、redis如何保持高可用和同步数据，有哪些模式（主从等）

### 17、额外:线程与线程是如何通信的，线程之间是互相隔离的吗？进程之间又是互相隔离的吗？

目前顺丰使用技术为springboot、mybatisplus、mysql，ai优化使用的扣子、通义灵码之类的



## 平安（2025-08-06）

### 1、string“”与string对象  new string的区别，底层指向

### 2、object对象中线程通信的用法，notifyall（）是如何知道要通知哪些线程的

### 3、java中有哪些申明（注意，最新版本），比如class enum

### 4、请求并发、重发处理，后台如果判断是否是重复请求，比如app web都同时下单

### 5、对于这种并发，不加锁，不用消息队列，有没有更好的答案，性能更优的

### 6、如果后台业务并发修改同一行数据，是怎么处理，有没有不加锁的处理方法（乐观锁？）

### 7、分库分表，有哪些策略，会带来什么问题

### 8、设计模式，事件模式、代理模式、策略模式，后两个的区别

### 9、场景题

微博中，每个人都会被关注或者关注别人，其中有人发了一条新的微博，如何及时通知粉丝，如果是大v发呢？如果是大v的朋友圈（许多大v转发呢）数据库怎么设计，消息怎么及时通知

### 10、回文字符串判断

### 11、有一些课程，需要学习前置课程，给你一个二维数组

【1，2】
【1，3】  表示学习1需要前置学习2、3课程，可以同时学习多门课程，每门课程学习时间相同（例如同时学1、5、6，只需要一个单位）
求最短时间需要多久学完

### 12、项目经历中比较复杂的，怎么优化的

### 13、如果包路径、类，与你的class路径，类一模一样，会发生什么

### 14、redis大key, redis 热点数据怎么处理？

## 科大讯飞(2025-08-08)

### 1、redis集群了解吗？有哪些当时，数据同步了解吗？

### 2、java.中自带的锁有哪些，可以锁方法可以锁对象吗？为什么要用分布式锁呢？java中的锁有用过吗？

### 3、springboot了解吗？spring呢，servlet处理呢，你们平台怎么处理的

### 4、bean的生命周期？苍穹平台怎么处理bean的，怎么生成对象的

### 5、数据库b树与b+树，哪个性能更好为什么？索引失效的情况

### 6、java8新特性（其实想问java17的估计）

### 7、stream流，与foreach区别，有性能提升吗？

### 8、线程池，什么是核心线程、最大线程、阻塞队列（等一些参数）

### 9、多线程数据处理，如果拿结果的？

### 10、capetablefuture，与funure区别，用过future吗？

### 11、模块设计，模块优化

### 12、培训、管理怎么做的

### 13、性能优化怎么排查的，怎么优化的

主要用spring cloud、mysql等技术，ai用自研产品，主要招人是为了成立一个部门维护大湾区的二开产品

